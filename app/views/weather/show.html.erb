<%= javascript_include_tag 'weather' %>

<% if @weather_info.present? %>
  <h1>天気情報</h1>
  <p>あなたの地域: <%= current_user.prefecture.name %></p>
  <p>天気: <span id="weather_japanese"></span></p>
  <p><%= image_tag("http://openweathermap.org/img/w/#{@weather_info[:weather_icon]}.png", style: "filter: grayscale(0%)") %></p>
  <p>温度: <%= @weather_info[:temp] %>°C</p>
  <p>最高気温: <%= @weather_info[:temp_max] %>°C</p>
  <p>最低気温: <%= @weather_info[:temp_min] %>°C</p>
  <p>湿度: <%= @weather_info[:humidity] %>％</p>

  <script>
    document.getElementById('weather_japanese').textContent = get_weather_japanese("<%= @weather_info[:weather_main] %>");
  </script>
<% else %>
  <p>天気情報が取得できませんでした。</p>
<% end %>
